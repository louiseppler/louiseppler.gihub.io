<!DOCTYPE html>
<html>
<body>
<h1> Version #0002</h1>
<audio id="sync" preload="metadata">
  <source src="sync.m4a">
  Your browser does not support the audio element.
</audio>
<audio id="track1"  preload="metadata">
  <source src="1_1.m4a">
  Your browser does not support the audio element.
</audio>
<audio id="track2"  preload="metadata">
  <source src="1_2.m4a">
  Your browser does not support the audio element.
</audio>

<button onclick="playAudioSync()" type="button">Sync</button>
<button onclick="playAudio1()" type="button">Track 1</button>
<button onclick="playAudio2()" type="button">Track 2</button>


<button onclick="pauseAudio()" type="button">Pause Audio</button>
<p></p>
Starttime: <input type="text" id="startTF" value="10">
<p></p>
Delay: <input type="text" id="delayTF" value="0">
<p></p>
Shift: <input type="text" id="shiftTF" value="0">




<script>
var s = document.getElementById("sync");
var t1 = document.getElementById("track1");
var t2 = document.getElementById("track2");


function getDelay() {
  var today = new Date();

  var shift = parseInt(document.getElementById("startTF").value);

  var starttime = parseInt(document.getElementById("startTF").value)*1000-shift;

  var delay = parseInt(document.getElementById("delayTF").value);

  var delta = starttime - (today.getTime() % starttime);

  console.log("delay of seconds",(delta + delay)/1000,);

  return (delta + delay);

}

function playAudioSync() {
  // var today = new Date();
  //
  // var shift = parseInt(document.getElementById("startTF").value);
  //
  // var starttime = parseInt(document.getElementById("startTF").value)*1000-shift;
  //
  // var delay = parseInt(document.getElementById("delayTF").value);
  //
  // var delta = starttime - (today.getTime() % starttime);
  //
  // console.log("plaing audio in seconds",(delta + delay)/1000,);

  var d = getDelay();
  setTimeout(function(){ s.play(); console.log(d); }, d+0);
}

function playAudio1() {
  // var today = new Date();
  //
  // var starttime = parseInt(document.getElementById("startTF").value)*1000;
  //
  // var delay = parseInt(document.getElementById("delayTF").value);
  //
  // var delta = starttime - (today.getTime() % starttime)
  //
  // console.log("plaing audio in seconds",(delta + delay)/1000,);
  //
  // setTimeout(function(){ t1.play(); }, delta + delay);

  var d = getDelay();
  setTimeout(function(){ t1.play(); console.log(d); }, d+0);
}

function playAudio2() {
  // var today = new Date();
  //
  // var starttime = parseInt(document.getElementById("startTF").value)*1000;
  //
  // var delay = parseInt(document.getElementById("delayTF").value);
  //
  // var delta = starttime - (today.getTime() % starttime)
  //
  // console.log("plaing audio in seconds",(delta + delay)/1000,);
  //
  // setTimeout(function(){ t2.play(); }, delta + delay);

  var d = getDelay();
  setTimeout(function(){ t2.play(); console.log(d); }, d+0);
}

function pauseAudio() {
  s.pause();
  t1.pause();
  t2.pause();
}
</script>

</body>
</html>
